# 客户管理模块使用指南

## 快速开始

### 1. 访问客户管理
1. 登录系统后，在导航菜单中找到"客户管理"
2. 点击进入客户管理页面
3. 页面将显示客户、供应商、收货人和新客户跟进四个标签页

### 2. 查看客户列表
- 在"客户管理"标签页中，您可以看到所有客户信息
- 每个客户显示：客户名称、时间轴事件数量、跟进记录数量、创建时间
- 点击客户名称或"查看详情"按钮进入客户详情页面

## 🆕 新功能说明

### 性能监控系统
系统现在包含完整的性能监控功能：
- **自动性能追踪**: 页面加载时间、交互响应时间等
- **错误监控**: 自动捕获和报告JavaScript错误
- **用户行为分析**: 功能使用情况统计
- **开发工具**: 开发环境下的调试面板

### 功能开关系统
在开发环境中，您可以：
- 在页面右下角看到功能开关管理面板
- 动态启用/禁用各种功能
- 查看功能使用统计
- 重置功能状态

## 时间轴功能

### 1. 自动时间轴生成
- 系统会自动从您的历史记录中提取时间轴事件
- 支持的文档类型：报价单、销售确认、装箱单、财务发票
- 点击"同步历史"按钮手动触发同步

### 2. 查看时间轴
1. 进入客户详情页面
2. 默认显示"时间轴"标签页
3. 时间轴按时间顺序显示所有事件
4. 每个事件显示：类型图标、标题、描述、日期、状态、金额等

### 3. 添加自定义事件
1. 在时间轴页面点击"添加事件"按钮
2. 填写事件信息：
   - **事件标题**：必填，描述事件的主要内容
   - **事件描述**：可选，详细说明事件内容
   - **事件日期**：必填，选择事件发生的日期
   - **事件状态**：选择进行中、已完成或已取消
3. 点击"添加事件"保存

### 4. 筛选和搜索
1. 点击"筛选"按钮展开筛选面板
2. 在搜索框中输入关键词搜索事件
3. 系统会实时过滤显示匹配的事件

## 跟进管理功能

### 1. 查看跟进记录
1. 在客户详情页面点击"跟进记录"标签页
2. 查看该客户的所有跟进任务
3. 跟进记录按优先级和到期日期排序

### 2. 添加跟进任务
1. 在跟进记录页面点击"添加跟进"按钮
2. 填写跟进信息：
   - **跟进类型**：新客户跟进、普通跟进、提醒
   - **标题**：跟进任务的主题
   - **描述**：详细的跟进内容
   - **到期日期**：设置跟进截止日期
   - **优先级**：选择高、中、低优先级
3. 点击"添加跟进"保存

### 3. 管理跟进任务
- **完成跟进**：点击跟进记录右侧的"完成"按钮
- **编辑跟进**：点击"编辑"按钮修改跟进内容
- **删除跟进**：点击"删除"按钮移除跟进记录
- **查看状态**：跟进状态包括待处理、已完成、已过期

### 4. 跟进统计
- **即将到期**：显示7天内到期的跟进任务
- **已过期**：显示超过到期日期的跟进任务
- **按优先级筛选**：可以按高、中、低优先级筛选

## 新客户跟进功能

### 1. 自动识别新客户
1. 切换到"新客户跟进"标签页
2. 点击"自动识别"按钮
3. 系统会从历史记录中识别新客户
4. 自动为新客户创建跟进任务

### 2. 查看新客户统计
- **总客户数**：所有新客户的总数
- **活跃客户**：正在跟进中的客户数量
- **已关闭**：已完成跟进或关闭的客户数量
- **已过期**：跟进任务已过期的客户数量

### 3. 管理跟进阶段
新客户的跟进阶段包括：
- **初次联系**：首次与客户建立联系
- **需求分析**：了解客户的具体需求
- **方案制定**：为客户制定解决方案
- **商务谈判**：进行商务条款谈判
- **已关闭**：跟进完成或客户关闭

## 数据管理

### 1. 客户信息管理
- **添加客户**：点击"添加新客户"按钮
- **编辑客户**：点击客户列表中的"编辑"按钮
- **删除客户**：点击"删除"按钮（注意：删除会影响历史记录）

### 2. 供应商管理
- 切换到"供应商管理"标签页
- 管理供应商信息，包括名称、联系方式等
- 支持添加、编辑、删除操作

### 3. 收货人管理
- 切换到"收货人管理"标签页
- 管理收货人信息，包括名称、地址等
- 支持添加、编辑、删除操作

## 高级功能

### 1. 数据同步
- 系统会自动监听历史记录的变化
- 当您创建新的报价单、发票等文档时，时间轴会自动更新
- 新客户也会被自动识别并创建跟进任务

### 2. 性能优化
- 大量数据时使用虚拟滚动，确保页面流畅
- 搜索和筛选操作使用防抖优化，提升用户体验
- 数据缓存机制减少重复加载
- 服务器端渲染优化，提升页面加载速度

### 3. 数据导出
- 支持导出客户列表数据
- 支持导出时间轴事件数据
- 支持导出跟进记录数据

## 常见问题

### Q: 为什么时间轴中没有显示某些文档？
A: 请检查以下几点：
1. 确认文档已保存到历史记录
2. 点击"同步历史"按钮手动同步
3. 检查文档中的客户名称是否正确

### Q: 如何修改跟进任务的优先级？
A: 在跟进记录列表中，点击"编辑"按钮，然后修改优先级设置。

### Q: 新客户识别不准确怎么办？
A: 系统基于历史记录中的客户名称进行识别，请确保：
1. 历史记录中的客户名称一致
2. 手动添加客户时使用正确的名称
3. 定期清理重复的客户记录

### Q: 如何批量完成跟进任务？
A: 目前系统支持单个完成跟进任务。如需批量操作，可以：
1. 使用筛选功能找到需要完成的任务
2. 逐个完成相关任务

### Q: 数据丢失了怎么办？
A: 系统使用localStorage存储数据，请确保：
1. 不要清除浏览器数据
2. 定期备份重要数据
3. 使用同一浏览器访问系统

### Q: 页面加载时出现500错误怎么办？
A: 这是服务器端渲染问题，解决方案：
1. 刷新页面重试
2. 清除浏览器缓存
3. 如果问题持续，请联系技术支持

### Q: 控制台出现性能监控警告怎么办？
A: 这些是正常的浏览器兼容性警告：
1. 不影响功能使用
2. 可以安全忽略
3. 在生产环境中不会出现

## 最佳实践

### 1. 客户信息管理
- 保持客户名称的一致性
- 及时更新客户联系信息
- 定期清理无效的客户记录

### 2. 时间轴使用
- 定期同步历史记录
- 为重要事件添加自定义记录
- 使用筛选功能快速找到特定事件

### 3. 跟进管理
- 设置合理的到期日期
- 及时完成跟进任务
- 使用优先级标记重要任务

### 4. 新客户跟进
- 定期运行自动识别
- 及时跟进新客户
- 记录跟进过程和结果

### 5. 性能优化
- 定期清理浏览器缓存
- 避免同时打开过多标签页
- 使用稳定的网络连接

## 开发环境功能

### 功能开关管理
在开发环境中，您可以：
1. 在页面右下角看到红色的功能开关按钮
2. 点击按钮打开功能开关管理面板
3. 查看各功能的使用统计
4. 动态启用/禁用功能
5. 使用"全部关闭"和"重置默认"按钮

### 性能监控调试
在浏览器控制台中可以使用：
```javascript
// 查看性能监控数据
window.__ANALYTICS__.getStats()

// 强制刷新数据
window.__ANALYTICS__.forceFlush()

// 查看功能开关状态
window.__FEATURE_FLAGS__.getStats()
```

## 技术支持

如果您在使用过程中遇到问题，请：
1. 查看本使用指南
2. 检查常见问题部分
3. 查看浏览器控制台的错误信息
4. 联系技术支持团队

---

*最后更新：2025年1月24日*

# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.1.0] - 2025-01-08

### Added
- **采购模块模块化重构**: 完整的模块化架构，包含store/selectors/services/hooks/components
- **键盘导航功能**: ItemsTable支持Enter键在单元格间移动，ArrowUp/ArrowDown在行间移动
- **历史搜索功能**: HistoryDrawer支持按标题、PO号、供应商名称实时搜索过滤
- **自动保存功能**: 300ms防抖自动保存，支持localStorage配额不足时的降级保存
- **PDF负载集中化**: 统一的PDF导出数据结构，避免页面到处拼装
- **Toast提示系统**: 保存成功/失败的用户反馈，支持自动消失
- **表单验证增强**: 字段级错误提示，实时验证反馈
- **Store迁移v3**: 支持布尔字段从字符串到布尔值的自动迁移
- **类型安全**: 完整的TypeScript覆盖，零构建警告
- **回归测试套件**: 全面的功能测试清单

### Changed
- **采购页面架构**: 从单体组件重构为模块化架构
- **表单绑定统一**: 使用field/numberField/boolField/selectField统一处理
- **错误处理机制**: 统一的错误提示和异常处理
- **数据持久化**: 改进的localStorage管理和版本迁移

### Fixed
- **构建警告**: 解决所有TypeScript类型错误和React受控告警
- **服务层兼容性**: 修复新旧数据结构的兼容性问题
- **性能优化**: 减少不必要的重渲染和内存泄漏

### Breaking Changes
- 无破坏性变更，保持路由与数据完全兼容

## [1.0.0] - 2024-01-15

### Added
- **PDF性能优化**: 实现字体和图片缓存系统，大幅提升PDF生成性能
- **字体预热优化**: 首轮字体加载从9.7s优化到150-180ms
- **PDF生成优化**: 表格生成从463ms优化到250ms左右
- **缓存系统**: 支持字体和图片的版本控制和缓存管理
- **错误处理**: 完善的缓存错误处理和降级机制

### Changed
- **Dashboard页面重构**: 模块化拆分，提升代码可维护性
- **性能优化**: 统一文档计数逻辑，使用Map加速权限判断
- **用户体验**: 响应式筛选器，智能空状态提示

### Fixed
- **代码质量**: 完整的TypeScript类型定义，完善的错误处理
- **状态同步**: 修复重新开始功能数据恢复问题
- **全局粘贴**: 增强支持"名称，数量，单位，单价"4列格式智能识别

## [0.9.0] - 2024-01-10

### Added
- **2048游戏AI推演功能**: 使用Expectimax算法和蒙特卡洛树搜索
- **随机演示功能**: 用于调试和蒙特卡洛模拟
- **推演统计和速度控制**: 支持手动干预和撤销功能
- **移动端优化**: 优化移动端用户体验

### Changed
- **AI算法性能**: 支持Alpha-Beta剪枝优化
- **状态管理**: 使用JSON深拷贝确保状态隔离

## [0.8.0] - 2024-01-05

### Added
- **报价管理Notes自定义排序**: 支持拖拽排序和显示控制
- **完整Notes类型**: 包含9种Notes类型，支持质量条款、保修条款等
- **双语模板**: EXW工厂交货/FOB离岸价/CIF到岸价等一键套用
- **内联选择器**: Payment Terms和Delivery Terms支持下拉选择

### Changed
- **用户体验**: 卡片式布局，展开态强化，收缩态标签
- **搜索功能**: 支持选项搜索，快速定位所需内容
- **拖拽编辑分离**: 拖拽句柄与编辑区域完全分离，避免冲突

## [0.7.0] - 2023-12-20

### Added
- **企业级预水合清理工具**: 解决Next.js应用中浏览器扩展导致的hydration警告问题
- **独立包发布**: 预水合清理工具已作为独立包发布

### Changed
- **项目结构**: 优化项目架构和文档组织

## [0.6.0] - 2023-12-15

### Added
- **邮件系统**: 集成邮件发送功能
- **装箱单管理**: 创建详细的装箱清单
- **发票管理**: 生成和管理发票

### Changed
- **Dashboard智能管理**: 模块化设计，实时文档管理
- **权限系统**: 多源权限容错，支持Store、Session、本地缓存三重权限源

## [0.5.0] - 2023-12-10

### Added
- **404页面娱乐功能**: 五子棋游戏和2048游戏
- **Dashboard模块化**: 清晰的模块按钮和权限控制
- **智能预加载**: 悬停预加载和权限动态预加载

### Changed
- **搜索高亮**: 支持文档编号、客户名称等关键词搜索和高亮显示
- **响应式布局**: 完美适配移动端和桌面端

## [0.4.0] - 2023-12-05

### Added
- **采购管理**: 处理供应商采购订单
- **报价管理**: 创建和管理客户报价单

### Changed
- **技术栈升级**: Next.js 14 (App Router)
- **UI组件**: Tailwind CSS + Lucide React

## [0.3.0] - 2023-11-30

### Added
- **状态管理**: React Hooks + Zustand
- **部署平台**: Vercel配置

### Changed
- **项目结构**: 优化目录组织和文件结构

## [0.2.0] - 2023-11-25

### Added
- **基础功能**: 用户认证、权限管理
- **核心业务**: 报价、采购、发票、装箱单

### Changed
- **架构设计**: 现代化企业管理系统架构

## [0.1.0] - 2023-11-20

### Added
- **项目初始化**: MLUONET企业管理系统基础框架
- **技术栈**: Next.js、TypeScript、Tailwind CSS
- **基础配置**: 开发环境、构建配置、部署设置

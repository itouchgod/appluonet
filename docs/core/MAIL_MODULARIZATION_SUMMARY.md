# é‚®ä»¶æ¨¡å—åŒ–é‡æ„æ€»ç»“

## ğŸ¯ é‡æ„ç›®æ ‡

å°†åŸæœ‰çš„384è¡Œå•ä½“é‚®ä»¶é¡µé¢ç»„ä»¶è¿›è¡Œæ¨¡å—åŒ–é‡æ„ï¼Œå®ç°ï¼š
- **ä¸šåŠ¡é€»è¾‘ä¸UIåˆ†ç¦»**
- **çŠ¶æ€ç®¡ç†ç»Ÿä¸€åŒ–**
- **ç»„ä»¶èŒè´£æ¸…æ™°åŒ–**
- **ä»£ç å¯ç»´æŠ¤æ€§æå‡**

## âœ… å·²å®Œæˆçš„é‡æ„

### 1. ç›®å½•ç»“æ„é‡æ„

```
src/features/mail/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ MailPage.tsx                    # ä¸»é¡µé¢å®¹å™¨ï¼ˆè°ƒåº¦å±‚ï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MailTabs.tsx                   # æ ‡ç­¾åˆ‡æ¢ç»„ä»¶
â”‚   â”œâ”€â”€ MailForm.tsx                   # é‚®ä»¶è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ ReplyForm.tsx                  # å›å¤è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ MailPreview.tsx                # é¢„è§ˆç»„ä»¶
â”‚   â”œâ”€â”€ CopyButton.tsx                 # å¤åˆ¶æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ BackButton.tsx                 # è¿”å›æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ ErrorDisplay.tsx               # é”™è¯¯æ˜¾ç¤ºç»„ä»¶
â”‚   â”œâ”€â”€ TextAreaField.tsx              # æ–‡æœ¬åŸŸå­—æ®µç»„ä»¶
â”‚   â”œâ”€â”€ SelectField.tsx                # é€‰æ‹©å­—æ®µç»„ä»¶
â”‚   â””â”€â”€ GenerateButton.tsx             # ç”ŸæˆæŒ‰é’®ç»„ä»¶
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useMailForm.ts                 # è¡¨å•çŠ¶æ€ç®¡ç†Hook
â”‚   â”œâ”€â”€ useMailGeneration.ts           # é‚®ä»¶ç”ŸæˆHook
â”‚   â””â”€â”€ useMailCopy.ts                 # å¤åˆ¶åŠŸèƒ½Hook
â”œâ”€â”€ services/
â”‚   â””â”€â”€ mail.service.ts                # é‚®ä»¶ç”ŸæˆæœåŠ¡
â”œâ”€â”€ state/
â”‚   â”œâ”€â”€ mail.store.ts                  # ZustandçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ mail.selectors.ts              # çŠ¶æ€é€‰æ‹©å™¨
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts                       # ç±»å‹å®šä¹‰
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ constants.ts                   # å¸¸é‡å®šä¹‰
â””â”€â”€ index.ts                           # æ¨¡å—å¯¼å‡ºæ–‡ä»¶
```

### 2. çŠ¶æ€ç®¡ç†ç»Ÿä¸€åŒ–

#### Zustand Store (`state/mail.store.ts`)
- **æ ¸å¿ƒçŠ¶æ€**: `formData`, `activeTab`, `mailType`, `isLoading`, `error`, `copySuccess`, `generatedContent`
- **Actions**: `setActiveTab`, `updateFormData`, `setMailType`, `setGeneratedContent`, `setLoading`, `setError`, `setCopySuccess`, `resetForm`, `clearError`

#### é€‰æ‹©å™¨ (`state/mail.selectors.ts`)
- `useFormData()` - è¡¨å•æ•°æ®
- `useActiveTab()` - å½“å‰æ ‡ç­¾é¡µ
- `useIsLoading()` - åŠ è½½çŠ¶æ€
- `useError()` - é”™è¯¯ä¿¡æ¯
- `useCanGenerateMail()` - æ˜¯å¦å¯ä»¥ç”Ÿæˆé‚®ä»¶
- `useIsFormValid()` - è¡¨å•æ˜¯å¦æœ‰æ•ˆ
- `useHasGeneratedContent()` - æ˜¯å¦æœ‰ç”Ÿæˆå†…å®¹

### 3. æœåŠ¡å±‚è®¾è®¡

#### MailService (`services/mail.service.ts`)
- `generateMail()` - ç”Ÿæˆé‚®ä»¶å†…å®¹
- `validateFormData()` - éªŒè¯è¡¨å•æ•°æ®
- `formatMailContent()` - æ ¼å¼åŒ–é‚®ä»¶å†…å®¹
- `copyToClipboard()` - å¤åˆ¶åˆ°å‰ªè´´æ¿

### 4. Hookså±‚è®¾è®¡

#### useMailForm (`hooks/useMailForm.ts`)
- è¡¨å•å­—æ®µç»‘å®š
- è¡¨å•éªŒè¯
- è¡¨å•é‡ç½®
- å­—æ®µæ›´æ–°

#### useMailGeneration (`hooks/useMailGeneration.ts`)
- é‚®ä»¶ç”Ÿæˆé€»è¾‘
- é”™è¯¯å¤„ç†
- åŠ è½½çŠ¶æ€ç®¡ç†

#### useMailCopy (`hooks/useMailCopy.ts`)
- å¤åˆ¶åŠŸèƒ½
- æˆåŠŸæç¤ºç®¡ç†

### 5. ç»„ä»¶æ‹†åˆ†æ–¹æ¡ˆ

#### ä¸»é¡µé¢å®¹å™¨ (`app/MailPage.tsx`)
- æ€§èƒ½ç›‘æ§
- é¡µé¢å¸ƒå±€
- ç»„ä»¶è°ƒåº¦

#### è¡¨å•ç»„ä»¶
- `MailForm` - é‚®ä»¶ç¼–å†™è¡¨å•
- `ReplyForm` - é‚®ä»¶å›å¤è¡¨å•
- `TextAreaField` - æ–‡æœ¬åŸŸå­—æ®µ
- `SelectField` - é€‰æ‹©å­—æ®µ
- `GenerateButton` - ç”ŸæˆæŒ‰é’®

#### é¢„è§ˆç»„ä»¶
- `MailPreview` - é‚®ä»¶é¢„è§ˆ
- `CopyButton` - å¤åˆ¶æŒ‰é’®
- `ErrorDisplay` - é”™è¯¯æ˜¾ç¤º

#### å¯¼èˆªç»„ä»¶
- `MailTabs` - æ ‡ç­¾åˆ‡æ¢
- `BackButton` - è¿”å›æŒ‰é’®

### 6. ç±»å‹ç³»ç»Ÿ

#### æ ¸å¿ƒç±»å‹ (`types/index.ts`)
- `MailFormData` - è¡¨å•æ•°æ®ç±»å‹
- `GenerateMailParams` - ç”Ÿæˆå‚æ•°ç±»å‹
- `ValidationResult` - éªŒè¯ç»“æœç±»å‹
- `MailTypeOption` - é‚®ä»¶ç±»å‹é€‰é¡¹
- `LanguageOption` - è¯­è¨€é€‰é¡¹
- `MailTab` - é‚®ä»¶æ ‡ç­¾ç±»å‹

### 7. å¸¸é‡ç®¡ç†

#### å¸¸é‡å®šä¹‰ (`utils/constants.ts`)
- `LANGUAGE_OPTIONS` - è¯­è¨€é€‰é¡¹
- `MAIL_TYPE_OPTIONS` - é‚®ä»¶é£æ ¼é€‰é¡¹
- `FORM_LABELS` - è¡¨å•æ ‡ç­¾
- `PLACEHOLDERS` - å ä½ç¬¦æ–‡æœ¬
- `BUTTON_TEXTS` - æŒ‰é’®æ–‡æœ¬

## ğŸ”§ æŠ€æœ¯ç‰¹ç‚¹

### 1. æ¨¡å—åŒ–è®¾è®¡
- **èŒè´£åˆ†ç¦»**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ç‰¹å®šåŠŸèƒ½
- **å¯å¤ç”¨æ€§**: ç»„ä»¶å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å¤ç”¨
- **å¯æµ‹è¯•æ€§**: æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•
- **å¯ç»´æŠ¤æ€§**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤

### 2. çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- **Zustand Store**: è½»é‡çº§çŠ¶æ€ç®¡ç†
- **é€‰æ‹©å™¨ä¼˜åŒ–**: ç²¾ç¡®çš„çŠ¶æ€è®¢é˜…
- **æ€§èƒ½ä¼˜åŒ–**: å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“

### 3. ç±»å‹å®‰å…¨
- **TypeScript**: å®Œæ•´çš„ç±»å‹å®šä¹‰
- **æ¥å£çº¦æŸ**: æ˜ç¡®çš„ç»„ä»¶æ¥å£
- **ç±»å‹æ¨å¯¼**: è‡ªåŠ¨ç±»å‹æ¨å¯¼

### 4. ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **æš—è‰²ä¸»é¢˜**: æ”¯æŒæš—è‰²æ¨¡å¼
- **åŠ è½½çŠ¶æ€**: å‹å¥½çš„åŠ è½½æç¤º
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†

## ğŸ“Š é‡æ„æ•ˆæœ

### ä»£ç è´¨é‡æå‡
- **ä»£ç è¡Œæ•°**: ä»384è¡Œå•ä½“ç»„ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶
- **å¯ç»´æŠ¤æ€§**: æ¯ä¸ªæ–‡ä»¶èŒè´£å•ä¸€ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
- **å¯å¤ç”¨æ€§**: ç»„ä»¶å¯ä»¥åœ¨å…¶ä»–é¡µé¢å¤ç”¨
- **å¯æµ‹è¯•æ€§**: æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•

### å¼€å‘æ•ˆç‡æå‡
- **å¹¶è¡Œå¼€å‘**: ä¸åŒå¼€å‘è€…å¯åŒæ—¶å¼€å‘ä¸åŒæ¨¡å—
- **ä»£ç å¤ç”¨**: å‡å°‘é‡å¤ä»£ç 
- **è°ƒè¯•ä¾¿åˆ©**: é—®é¢˜å®šä½æ›´å‡†ç¡®
- **æ–‡æ¡£å®Œå–„**: æ¯ä¸ªæ¨¡å—éƒ½æœ‰æ¸…æ™°çš„æ¥å£

### ç”¨æˆ·ä½“éªŒæå‡
- **æ€§èƒ½ä¼˜åŒ–**: æ›´ç²¾ç¡®çš„çŠ¶æ€ç®¡ç†
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **åŠ è½½çŠ¶æ€**: æ›´å¥½çš„åŠ è½½ä½“éªŒ
- **å“åº”å¼è®¾è®¡**: æ›´å¥½çš„ç§»åŠ¨ç«¯é€‚é…

## ğŸš€ è¿ç§»ç­–ç•¥

### æ¸è¿›å¼è¿ç§»
1. **ç¬¬ä¸€é˜¶æ®µ**: åˆ›å»ºåŸºç¡€æ¶æ„ï¼ˆstoreã€servicesã€hooksï¼‰
2. **ç¬¬äºŒé˜¶æ®µ**: æ‹†åˆ†UIç»„ä»¶ï¼ˆTabsã€Formã€Previewï¼‰
3. **ç¬¬ä¸‰é˜¶æ®µ**: é‡æ„ä¸»é¡µé¢ï¼Œä½¿ç”¨æ–°ç»„ä»¶
4. **ç¬¬å››é˜¶æ®µ**: ä¼˜åŒ–å’Œæµ‹è¯•

### å…¼å®¹æ€§ä¿è¯
- ä¿æŒç°æœ‰APIæ¥å£ä¸å˜
- ä¿æŒç°æœ‰è·¯ç”±è·¯å¾„ä¸å˜
- ä¿æŒç°æœ‰åŠŸèƒ½é€»è¾‘ä¸å˜
- é€æ­¥æ›¿æ¢ï¼Œç¡®ä¿åŠŸèƒ½ç¨³å®š

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨
```typescript
import { MailPage } from '@/features/mail';

// ç›´æ¥ä½¿ç”¨æ¨¡å—åŒ–é¡µé¢
export default function MailPageWrapper() {
  return <MailPage />;
}
```

### ç»„ä»¶å¤ç”¨
```typescript
import { MailForm, useMailForm } from '@/features/mail';

// åœ¨å…¶ä»–é¡µé¢å¤ç”¨ç»„ä»¶
export function CustomMailForm() {
  const { field, validate } = useMailForm();
  
  return (
    <MailForm />
  );
}
```

### æœåŠ¡è°ƒç”¨
```typescript
import { MailService } from '@/features/mail';

// ç›´æ¥è°ƒç”¨æœåŠ¡
const content = await MailService.generateMail({
  language: 'English',
  type: 'formal',
  content: 'Hello world',
  originalMail: '',
  mode: 'mail'
});
```

## ğŸ‰ æ€»ç»“

é€šè¿‡æ¨¡å—åŒ–é‡æ„ï¼Œæˆ‘ä»¬æˆåŠŸå°†384è¡Œçš„å•ä½“é‚®ä»¶é¡µé¢ç»„ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªèŒè´£æ¸…æ™°ã€å¯ç»´æŠ¤çš„æ¨¡å—ã€‚é‡æ„åçš„ä»£ç å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **æ›´å¥½çš„ä»£ç ç»„ç»‡**: æ¸…æ™°çš„ç›®å½•ç»“æ„å’ŒèŒè´£åˆ†ç¦»
2. **æ›´é«˜çš„å¯ç»´æŠ¤æ€§**: æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
3. **æ›´å¼ºçš„å¯å¤ç”¨æ€§**: ç»„ä»¶å’ŒæœåŠ¡å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å¤ç”¨
4. **æ›´å¥½çš„å¯æµ‹è¯•æ€§**: æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•
5. **æ›´ä¼˜çš„æ€§èƒ½**: ç²¾ç¡®çš„çŠ¶æ€ç®¡ç†å’Œç»„ä»¶ä¼˜åŒ–

è¿™æ¬¡é‡æ„ä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œç»´æŠ¤å¥ å®šäº†è‰¯å¥½çš„åŸºç¡€ï¼ŒåŒæ—¶ä¿æŒäº†æ‰€æœ‰ç°æœ‰åŠŸèƒ½çš„å®Œæ•´æ€§ã€‚

# 富文本编辑器功能说明

## 功能概述

在采购模块的规格描述字段中，新增了完整的富文本编辑器功能，类似Word编辑器的体验，支持格式化文本、表格、图片等丰富的内容编辑功能。

## 主要特性

### 1. 文本格式化
- **粗体**：支持文本加粗显示
- **斜体**：支持文本斜体显示
- **下划线**：支持文本下划线
- **删除线**：支持文本删除线
- **字体大小**：支持8种字体大小选择（12px-32px）
- **文本颜色**：支持10种预设颜色选择

### 2. 文本对齐
- **左对齐**：文本左对齐显示
- **居中对齐**：文本居中对齐
- **右对齐**：文本右对齐
- **两端对齐**：文本两端对齐

### 3. 列表功能
- **无序列表**：支持项目符号列表
- **有序列表**：支持数字编号列表

### 4. 插入功能
- **表格插入**：支持自定义行数和列数的表格
- **图片插入**：支持通过URL插入图片
- **链接插入**：支持插入超链接

### 5. 编辑操作
- **撤销**：支持撤销操作
- **重做**：支持重做操作
- **全选**：支持全选内容
- **清除格式**：支持清除所有格式

### 6. PDF渲染支持
- **格式保持**：所有格式在PDF中正确显示
- **表格渲染**：表格在PDF中正确显示边框和内容
- **列表渲染**：列表在PDF中正确显示项目符号
- **图片占位符**：图片在PDF中显示为占位符

## 使用方法

### 基本操作
1. **文本格式化**：选中文本后点击相应的格式按钮
2. **字体调整**：使用字体大小下拉菜单选择
3. **颜色调整**：点击颜色按钮选择文本颜色
4. **对齐调整**：点击对齐按钮调整文本对齐方式

### 插入操作
1. **插入表格**：点击"⊞"按钮，输入行数和列数
2. **插入图片**：点击"🖼️"按钮，输入图片URL
3. **插入链接**：点击"🔗"按钮，输入链接URL和文本
4. **插入列表**：点击"•"或"1."按钮插入列表

### 编辑操作
1. **撤销**：点击"↶"按钮或使用Ctrl+Z
2. **重做**：点击"↷"按钮或使用Ctrl+Y
3. **全选**：点击"☑"按钮或使用Ctrl+A
4. **清除格式**：点击"🗑️"按钮清除所有格式

## 工具栏说明

### 文本格式区域
- **B** - 粗体
- **I** - 斜体
- **U** - 下划线
- **S** - 删除线

### 字体设置区域
- **字体大小** - 下拉选择框，支持12px-32px
- **颜色选择** - 10种预设颜色按钮

### 对齐方式区域
- **⫷** - 左对齐
- **⫸** - 居中对齐
- **⫹** - 右对齐
- **⫺** - 两端对齐

### 列表区域
- **•** - 无序列表
- **1.** - 有序列表

### 插入功能区域
- **⊞** - 插入表格
- **🖼️** - 插入图片
- **🔗** - 插入链接

### 编辑操作区域
- **↶** - 撤销
- **↷** - 重做
- **☑** - 全选
- **🗑️** - 清除格式

## 示例内容

### 基础格式化示例
```html
<h2>项目规格描述</h2>
<p>这是一个<strong>重要的</strong>规格说明，包含<em>斜体文本</em>和<u>下划线文本</u>。</p>
```

### 列表示例
```html
<ul>
  <li>第一项规格要求</li>
  <li>第二项规格要求</li>
  <li>第三项规格要求</li>
</ul>
```

### 表格示例
```html
<table border="1" style="border-collapse: collapse; width: 100%;">
  <tr>
    <td style="padding: 8px; border: 1px solid #ccc;">产品名称</td>
    <td style="padding: 8px; border: 1px solid #ccc;">规格</td>
    <td style="padding: 8px; border: 1px solid #ccc;">数量</td>
  </tr>
  <tr>
    <td style="padding: 8px; border: 1px solid #ccc;">螺丝</td>
    <td style="padding: 8px; border: 1px solid #ccc;">M3x10</td>
    <td style="padding: 8px; border: 1px solid #ccc;">100</td>
  </tr>
</table>
```

## 技术实现

### 组件结构
- `RichTextEditor.tsx`：主要的富文本编辑器组件
- 集成到采购表单的规格描述字段

### 核心功能
1. **HTML编辑**：使用contentEditable实现富文本编辑
2. **命令执行**：使用document.execCommand执行格式化命令
3. **DOM解析**：解析HTML内容进行PDF渲染
4. **状态管理**：管理编辑器的各种状态

### PDF渲染
1. **HTML解析**：解析富文本HTML内容
2. **节点处理**：递归处理DOM节点
3. **格式转换**：将HTML格式转换为PDF格式
4. **布局计算**：计算PDF中的布局和分页

### 兼容性
- 支持现代浏览器
- 兼容深色模式
- 响应式设计
- 无障碍访问支持

## 注意

⚠️ **此功能已被移除**

根据项目需求，富文本编辑器功能已被移除，采购模块的规格描述字段现在使用普通的多行文本框。

## 相关文件

- `src/features/purchase/components/PurchaseForm.tsx` - 采购表单（使用普通textarea）
- `src/utils/purchasePdfGenerator.ts` - PDF渲染支持（普通文本，蓝色字体）
